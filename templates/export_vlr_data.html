<!DOCTYPE html>
<html>
<head>
    <title>Site User Count</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
        table {
            margin: auto;
            border-collapse: collapse;
            width: 80%;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px 12px;
        }
        th {
            background-color: #eee;
        }
        form {
            text-align: center;
            margin-bottom: 20px;
        }
        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
        }
    </style>
</head>
<body>
       <a
        href="{{ url_for('logout') }}"
        class="btn btn-outline-danger logout-btn"
      >
        Logout
      </a>
    <h2 style="text-align:center;">User Count by District and Site ID</h2>

    <form method="get" action="{{ url_for('user_count') }}">
        <label for="month">Select Month:</label>
        <select name="month" id="month">
            <option value="">All</option>
            {% for month in months %}
                <option value="{{ month }}" {% if selected_month == month %}selected{% endif %}>{{ month }}</option>
            {% endfor %}
        </select>
        <button type="submit">Search</button>
    </form>

    <form action="{{ url_for('download_vlr_data') }}" method="get">
        <input type="hidden" name="month" value="{{ selected_month }}">
        <button type="submit" class="btn btn-success">Download CSV</button>
    </form>



    <table>
        <thead>
            <tr>
                <th>District</th>
                <th>Site ID</th>
                <th>User Count</th>
            </tr>
        </thead>
        <tbody>
            {% for row in table_data %}
                <tr>
                    <td>{{ row.DISTRICT }}</td>
                    <td>{{ row.Site_ID }}</td>
                    <td>{{ row.User_Count }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
